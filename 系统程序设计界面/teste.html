<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.css">
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css"
          rel="stylesheet"/>
</head>
<body>
<table id="table" data-toggle="table">

</table>


<script src="js/jquery-1.10.2.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/locale/bootstrap-table-zh-CN.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
<script src="js/bootstrap-table-editable.js"></script>
<script>
    var $table = $('#table');
    var curRow = {};
    $table.bootstrapTable({
        toolbar: '#toolbar',  //工具按钮用哪个容器
        striped: true,   //是否显示行间隔色
        singleSelect: false,
        pagination: true, //分页
        pageNumber: 1,   //初始化加载第一页，默认第一页
        pageSize: 5,   //每页的记录行数（*）
        pageList: [5, 10], //可供选择的每页的行数（*）
        search: true, //显示搜索框
        sidePagination: "client", //服务端处理分页
        columns: [
            {
                field: 'id',
                title: '选择',
                formatter: function (value, row, index) {
                    console.log(value);
                    return "<input  value=\"" + value + "\"  type=\"checkbox\">选择该用户";
                }
            },
            {
                field: 'userName',
                title: '用户名',
                editable: {
                    type: 'text',
                    title: '用户名',
                    validate: function (v) {
//                        if (isNaN(v)) return '序号必须是数字';
//                        var age = parseInt(v);
//                        if (age <= 0) return '序号必须是正整数';
                        if (!$.trim(v)) return '不能为空';

                    }
                }
            }, {
                field: 'password',
                title: '用户密码',
                editable: {
                    type: 'text',
                    title: '用户密码',
                    validate: function (v) {
//                        if (isNaN(v)) return '序号必须是数字';
//                        var age = parseInt(v);
//                        if (age <= 0) return '序号必须是正整数';
                        if (!$.trim(v)) return '不能为空';

                    }
                }
            }, {
                field: 'profession',
                title: '职位',
                editable: {
                    type: 'text',
                    title: '职位',
                    validate: function (v) {
//                        if (isNaN(v)) return '序号必须是数字';
//                        var age = parseInt(v);
//                        if (age <= 0) return '序号必须是正整数';
                        if (!$.trim(v)) return '不能为空';
                    }
                }
            },
            {
                title: '权限',
                field: 'rank',
                align: 'center',
                editable: {
                    type: 'select',
                    title: '权限',
                    source: [{value: "2", text: "专业主任"}, {value: "3", text: "教师"}]
                }
            }
        ],
//        data是伪数据，当页面加载后会加载收到的数据，直接让传过来的数据等于data即可
        data: [{
            id: 1,
            userName: '刘乾瑜',
            password: 5678,
            profession: '副教授',
            rank: 3
        }, {
            id: 2,
            userName: '韩硕',
            password: 1234,
            profession: '教授',
            rank: 2
        }],
        onEditableSave: function (field, row, oldValue, $el) {
            console.log(field);
            console.log(row);
//            $.ajax({
//                type: "post",
//                url: "/Editable/Edit",
//                data: row,
//                dataType: 'JSON',
//                success: function (data, status) {
//                    if (status == "success") {
//                        alert('提交数据成功');
//                    }
//                },
//                error: function () {
//                    alert('编辑失败');
//                },
//                complete: function () {
//
//                }
//
//            });
        }
    });
</script>
</body>
</html>